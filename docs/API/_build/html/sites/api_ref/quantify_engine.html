<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>API reference &mdash; Quantipy 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Quantipy 0.1.0 documentation" href="../../index.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">Quantipy 0.1.0 documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="module-core.quantify.engine">
<span id="api-reference"></span><h1>API reference<a class="headerlink" href="#module-core.quantify.engine" title="Permalink to this headline">¶</a></h1>
<dl class="class">
<dt id="core.quantify.engine.Quantity">
<em class="property">class </em><code class="descclassname">core.quantify.engine.</code><code class="descname">Quantity</code><span class="sig-paren">(</span><em>link</em>, <em>weight=None</em>, <em>use_meta=False</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity" title="Permalink to this definition">¶</a></dt>
<dd><p>The Quantity object is the main Quantipy aggregation engine.</p>
<p>Consists of a link&#8217;s data matrix representation and sectional defintion
of weight vector (wv), x-codes section (xsect) and y-codes section
(ysect). The instance methods handle creation, retrieval and manipulation
of the data input matrices and section definitions as well as the majority
of statistical calculations.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="core.quantify.engine.Quantity.calc">
<code class="descname">calc</code><span class="sig-paren">(</span><em>expression</em>, <em>axis='x'</em>, <em>result_only=False</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.calc" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute (simple) aggregation level arithmetics.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.count">
<code class="descname">count</code><span class="sig-paren">(</span><em>axis=None</em>, <em>raw_sum=False</em>, <em>margin=True</em>, <em>as_df=True</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.count" title="Permalink to this definition">¶</a></dt>
<dd><p>Count entries over all cells or per axis margin.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>axis</strong> : {None, &#8216;x&#8217;, &#8216;y&#8217;}, deafult None</p>
<blockquote>
<div><p>When axis is None, the frequency of all cells from the uni- or
multivariate distribution is presented. If the axis is specified
to be either &#8216;x&#8217; or &#8216;y&#8217; the margin per axis becomes the resulting
aggregation.</p>
</div></blockquote>
<p><strong>raw_sum</strong> : bool, default False</p>
<blockquote>
<div><p>If True will perform a simple summation over the cells given the
axis parameter. This ignores net counting of qualifying answers in
favour of summing over all answers given when considering margins.</p>
</div></blockquote>
<p><strong>margin</strong> : bool, deafult True</p>
<blockquote>
<div><p>Controls whether the margins of the aggregation result are shown.
This also applies to margin aggregations themselves, since they
contain a margin in (form of the total number of cases) as well.</p>
</div></blockquote>
<p><strong>as_df</strong> : bool, default True</p>
<blockquote>
<div><p>Controls whether the aggregation is transformed into a Quantipy-
multiindexed (following the Question/Values convention)
pandas.DataFrame or will be left in its numpy.array format.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">self</p>
<blockquote class="last">
<div><p>Passes a pandas.DataFrame or numpy.array of cell or margin counts
to the <code class="docutils literal"><span class="pre">result</span></code> property.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.exclude">
<code class="descname">exclude</code><span class="sig-paren">(</span><em>codes</em>, <em>axis='x'</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.exclude" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for _missingfy(...keep_codes=False, ..., keep_base=False, ...)
Excludes specified codes from aggregation.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.filter">
<code class="descname">filter</code><span class="sig-paren">(</span><em>condition</em>, <em>keep_base=True</em>, <em>inplace=False</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.filter" title="Permalink to this definition">¶</a></dt>
<dd><p>Use a Quantipy conditional expression to filter the data matrix entires.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.group">
<code class="descname">group</code><span class="sig-paren">(</span><em>groups</em>, <em>axis='x'</em>, <em>expand=None</em>, <em>complete=False</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.group" title="Permalink to this definition">¶</a></dt>
<dd><p>Build simple or logical net vectors, optionally keeping orginating codes.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>groups</strong> : list, dict of lists or logic expression</p>
<blockquote>
<div><p>The group/net code defintion(s) in form of...</p>
<ul class="simple">
<li>a simple list: <code class="docutils literal"><span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3]</span></code></li>
<li>a dict of list: <code class="docutils literal"><span class="pre">{'grp</span> <span class="pre">A':</span> <span class="pre">[1,</span> <span class="pre">2,</span> <span class="pre">3],</span> <span class="pre">'grp</span> <span class="pre">B':</span> <span class="pre">[4,</span> <span class="pre">5,</span> <span class="pre">6]}</span></code></li>
<li>a logical expression: <code class="docutils literal"><span class="pre">not_any([1,</span> <span class="pre">2])</span></code></li>
</ul>
</div></blockquote>
<p><strong>axis</strong> : {<code class="docutils literal"><span class="pre">'x'</span></code>, <code class="docutils literal"><span class="pre">'y'</span></code>}, default <code class="docutils literal"><span class="pre">'x'</span></code></p>
<blockquote>
<div><p>The axis to group codes on.</p>
</div></blockquote>
<p><strong>expand</strong> : {None, <code class="docutils literal"><span class="pre">'before'</span></code>, <code class="docutils literal"><span class="pre">'after'</span></code>}, default <code class="docutils literal"><span class="pre">None</span></code></p>
<blockquote>
<div><p>If <code class="docutils literal"><span class="pre">'before'</span></code>, the codes that are grouped will be kept and placed
before the grouped aggregation; vice versa for <code class="docutils literal"><span class="pre">'after'</span></code>. Ignored
on logical expressions found in <code class="docutils literal"><span class="pre">groups</span></code>.</p>
</div></blockquote>
<p><strong>complete</strong> : bool, default False</p>
<blockquote>
<div><p>If True, codes that define the Link on the given <code class="docutils literal"><span class="pre">axis</span></code> but are
not present in the <code class="docutils literal"><span class="pre">groups</span></code> defintion(s) will be placed in their
natural position within the aggregation, respecting the value of
<code class="docutils literal"><span class="pre">expand</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">None</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.limit">
<code class="descname">limit</code><span class="sig-paren">(</span><em>codes</em>, <em>axis='x'</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.limit" title="Permalink to this definition">¶</a></dt>
<dd><p>Wrapper for _missingfy(...keep_codes=True, ..., keep_base=True, ...)
Restrict the data matrix entires to contain the specified codes only.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.normalize">
<code class="descname">normalize</code><span class="sig-paren">(</span><em>on='y'</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.normalize" title="Permalink to this definition">¶</a></dt>
<dd><p>Convert a raw cell count result to its percentage representation.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>on</strong> : {&#8216;y&#8217;, &#8216;x&#8217;}, default &#8216;y&#8217;</p>
<blockquote>
<div><p>Defines the base to normalize the result on. <code class="docutils literal"><span class="pre">'y'</span></code> will
produce column percentages, <code class="docutils literal"><span class="pre">'x'</span></code> will produce row
percentages.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">self</p>
<blockquote class="last">
<div><p>Updates an count-based aggregation in the <code class="docutils literal"><span class="pre">result</span></code> property.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.rescale">
<code class="descname">rescale</code><span class="sig-paren">(</span><em>scaling</em>, <em>drop=False</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.rescale" title="Permalink to this definition">¶</a></dt>
<dd><p>Modify the object&#8217;s <code class="docutils literal"><span class="pre">xdef</span></code> property reflecting new value defintions.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>scaling</strong> : dict</p>
<blockquote>
<div><p>Mapping of old_code: new_code, given as of type int or float.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.summarize">
<code class="descname">summarize</code><span class="sig-paren">(</span><em>stat='summary'</em>, <em>axis='x'</em>, <em>margin=True</em>, <em>as_df=True</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.summarize" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate distribution statistics across the given axis.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>stat</strong> : {&#8216;summary&#8217;, &#8216;mean&#8217;, &#8216;median&#8217;, &#8216;var&#8217;, &#8216;stddev&#8217;, &#8216;sem&#8217;, varcoeff&#8217;,</p>
<blockquote>
<div><blockquote>
<div><p>&#8216;min&#8217;, &#8216;lower_q&#8217;, &#8216;upper_q&#8217;, &#8216;max&#8217;}, default &#8216;summary&#8217;</p>
</div></blockquote>
<p>The measure to calculate. Defaults to a summary output of the most
important sample statistics.</p>
</div></blockquote>
<p><strong>axis</strong> : {&#8216;x&#8217;, &#8216;y&#8217;}, default &#8216;x&#8217;</p>
<blockquote>
<div><p>The axis which is reduced in the aggregation, e.g. column vs. row
means.</p>
</div></blockquote>
<p><strong>margin</strong> : bool, default True</p>
<blockquote>
<div><p>Controls whether statistic(s) of the marginal distribution are
shown.</p>
</div></blockquote>
<p><strong>as_df</strong> : bool, default True</p>
<blockquote>
<div><p>Controls whether the aggregation is transformed into a Quantipy-
multiindexed (following the Question/Values convention)
pandas.DataFrame or will be left in its numpy.array format.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">self</p>
<blockquote class="last">
<div><p>Passes a pandas.DataFrame or numpy.array of the descriptive (summary)
statistic(s) to the <code class="docutils literal"><span class="pre">result</span></code> property.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.unweight">
<code class="descname">unweight</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.unweight" title="Permalink to this definition">¶</a></dt>
<dd><p>Remove any weighting by dividing the matrix by the weight vector.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Quantity.weight">
<code class="descname">weight</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Quantity.weight" title="Permalink to this definition">¶</a></dt>
<dd><p>Weight by multiplying the indicator entries with the weight vector.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="core.quantify.engine.Test">
<em class="property">class </em><code class="descclassname">core.quantify.engine.</code><code class="descname">Test</code><span class="sig-paren">(</span><em>link</em>, <em>view_name_notation</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Test" title="Permalink to this definition">¶</a></dt>
<dd><p>The Quantipy Test object is a defined by a Link and the view name notation
string of a counts or means view. All auxiliary figures needed to arrive
at the test results are computed inside the instance of the object.</p>
<p class="rubric">Methods</p>
<dl class="method">
<dt id="core.quantify.engine.Test.get_se">
<code class="descname">get_se</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Test.get_se" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the standard error (se) estimate of the tested metric.</p>
<p>The calculation of the se is defined by the parameters of the setup.
The main difference is the handling of variances. <strong>unpooled</strong>
implicitly assumes variance inhomogenity between the column pairing&#8217;s
samples. <strong>pooled</strong> treats variances effectively as equal.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Test.get_sig">
<code class="descname">get_sig</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Test.get_sig" title="Permalink to this definition">¶</a></dt>
<dd><p>TODO: implement returning tstats only.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Test.get_statistic">
<code class="descname">get_statistic</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Test.get_statistic" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the test statistic of the algorithm.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Test.run">
<code class="descname">run</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Test.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Performs the testing algorithm and creates an output pd.DataFrame.</p>
<p>The output is indexed according to Quantipy&#8217;s Questions-&gt;Values
convention. Significant results between columns are presented as
lists of integer y-axis codes where the column with the higher value
is holding the codes of the columns with the lower values. NaN is
indicating that a cell is not holding any sig. higher values
compared to the others.</p>
</dd></dl>

<dl class="method">
<dt id="core.quantify.engine.Test.set_params">
<code class="descname">set_params</code><span class="sig-paren">(</span><em>level='mid'</em>, <em>mimic='Dim'</em>, <em>testtype='pooled'</em>, <em>use_ebase=True</em>, <em>ovlp_correc=True</em>, <em>cwi_filter=False</em>, <em>flag_bases=None</em><span class="sig-paren">)</span><a class="headerlink" href="#core.quantify.engine.Test.set_params" title="Permalink to this definition">¶</a></dt>
<dd><p>Sets the test algorithm parameters and defines the type of test.</p>
<p>This method sets the test&#8217;s global parameters and derives the
necessary measures for the computation of the test statistic.
The default values correspond to the SPSS Dimensions Column Tests
algorithms that control for bias introduced by weighting and
overlapping samples in the column pairs of multi-coded questions.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The Dimensions implementation uses variance pooling.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>level</strong> : str or float, default &#8216;mid&#8217;</p>
<blockquote>
<div><p>The level of significance given either as per &#8216;low&#8217; = 0.1,
&#8216;mid&#8217; = 0.05, &#8216;high&#8217; = 0.01 or as specific float, e.g. 0.15.</p>
</div></blockquote>
<p><strong>mimic</strong> : str, default=&#8217;Dim&#8217;</p>
<blockquote>
<div><p>Will instruct the mimicking of a software specific test.</p>
</div></blockquote>
<p><strong>testtype</strong> : str, default &#8216;pooled&#8217;</p>
<blockquote>
<div><p>Global definition of the tests.</p>
</div></blockquote>
<p><strong>use_ebase</strong> : bool, default True</p>
<blockquote>
<div><p>If True, will use the effective sample sizes instead of the
the simple weighted ones when testing a weighted aggregation.</p>
</div></blockquote>
<p><strong>ovlp_correc</strong> : bool, default True</p>
<blockquote>
<div><p>If True, will consider and correct for respondent overlap when
testing between multi-coded column pairs.</p>
</div></blockquote>
<p><strong>cwi_filter</strong> : bool, default False</p>
<blockquote>
<div><p>If True, will check an incoming count aggregation for cells that
fall below a treshhold comparison aggregation that assumes counts
to be independent.</p>
</div></blockquote>
<p><strong>flag_bases</strong> : list of two int, default None</p>
<blockquote>
<div><p>If provided, the output dataframe will replace results that have
been calculated on (eff.) bases below the first int with <code class="docutils literal"><span class="pre">'**'</span></code>
and mark results in columns with bases below the second int with
<code class="docutils literal"><span class="pre">'*'</span></code></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">self</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo.jpg" alt="Logo"/>
    
    <h1 class="logo logo-name">Quantipy</h2>
    
  </a>
</p>







<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What&#8217;s new?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc_overview/overview.html">Documentation</a></li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Quantipy dev team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.3.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.3</a>
      
      |
      <a href="../../_sources/sites/api_ref/quantify_engine.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>