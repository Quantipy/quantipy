

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Data sources &mdash; Quantipy 0.1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
  

  
    <link rel="stylesheet" href="../../../_static/custom.css" type="text/css" />
  

  
    <link rel="top" title="Quantipy 0.1.0 documentation" href="../../../index.html"/>
        <link rel="up" title="Documentation" href="../overview.html"/>
        <link rel="prev" title="Case weight computation" href="weighting.html"/> 

  
  <script src="../../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../../index.html" class="icon icon-home"> Quantipy
          

          
          </a>

          
            
            
              <div class="version">
                0.1.0
              </div>
            
          

          
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../release_notes/latest.html">What&#8217;s new?</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/latest.html#features">Features</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#first-version-of-official-documentation">First version of official documentation</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#spss-statictics-sav-file-format-i-o-support-added">SPSS Statictics .sav file format I/O support added</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#rewrite-of-quantity-class">Rewrite of <code class="docutils literal"><span class="pre">Quantity</span></code> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#chain-concat-and-cluster-merge-methods"><code class="docutils literal"><span class="pre">Chain.concat()</span></code> and <code class="docutils literal"><span class="pre">Cluster.merge()</span></code> methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#mimicked-askia-tests-now-support-nets-code-groups">Mimicked askia tests now support nets / code groups</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/latest.html#improvements">Improvements</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#view-notation-split-output-in-stack-describe-reduced">View notation split output in Stack.describe() reduced</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../release_notes/latest.html#view-object-and-view-meta">View object and View meta</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../release_notes/latest.html#bugfixes">Bugfixes</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="../overview.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="weighting.html">Case weight computation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="weighting.html#creating-weight-schemes">Creating weight schemes</a></li>
<li class="toctree-l3"><a class="reference internal" href="weighting.html#running-the-weightengine">Running the <code class="docutils literal"><span class="pre">WeightEngine</span></code></a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Data sources</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#case-and-meta-data">Case and meta data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#supported-conversions">Supported conversions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#spss-statistics">SPSS Statistics</a></li>
<li class="toctree-l4"><a class="reference internal" href="#dimensions">Dimensions</a></li>
<li class="toctree-l4"><a class="reference internal" href="#decipher">Decipher</a></li>
<li class="toctree-l4"><a class="reference internal" href="#ascribe">Ascribe</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../../index.html">Quantipy</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../overview.html">Documentation</a> &raquo;</li>
      
    <li>Data sources</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../../_sources/sites/lib_doc/dataset/io.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="data-sources">
<h1>Data sources<a class="headerlink" href="#data-sources" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line"><a class="reference internal" href="../../../genindex.html"><span>Index</span></a></div>
<div class="line"><a class="reference internal" href="../../../py-modindex.html"><span>Module Index</span></a></div>
</div>
<hr class="docutils" />
<div class="section" id="case-and-meta-data">
<h2>Case and meta data<a class="headerlink" href="#case-and-meta-data" title="Permalink to this headline">¶</a></h2>
<p>In Quantipy, case data is natively represented as a <code class="docutils literal"><span class="pre">pandas.DataFrame</span></code>
object, while metadata is organized in form of a <code class="docutils literal"><span class="pre">dict</span></code>.</p>
<p>In the most basic case, case data and associated meta files can be provided
as tab-delimited <code class="docutils literal"><span class="pre">.csv</span></code> and a <code class="docutils literal"><span class="pre">.json</span></code> string (that follows Quantipy&#8217;s
metadata structure) respectively. Loading files into Quantipy is done using the
<code class="docutils literal"><span class="pre">quantipy.dp.io.load_csv()</span></code> and <code class="docutils literal"><span class="pre">quantipy.dp.io.load_json()</span></code> methods.</p>
<p>Quantipy&#8217;s metadata structure is managed in pure Python and supports a
mapping syntax to allow shared and referenced content. Currently there are 6
meta elements in the document:</p>
<table border="1" class="docutils">
<colgroup>
<col width="17%" />
<col width="83%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">element</th>
<th class="head">contains</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'type'</span></code></td>
<td>case data type</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'info'</span></code></td>
<td>info on the source data</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'lib'</span></code></td>
<td>shared use references</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'columns'</span></code></td>
<td>info on <code class="docutils literal"><span class="pre">DataFrame</span></code> columns (Quantipy types, labels, etc.)</td>
</tr>
<tr class="row-even"><td><code class="docutils literal"><span class="pre">'sets'</span></code></td>
<td>ordered groups of variables pointing to other parts of the meta</td>
</tr>
<tr class="row-odd"><td><code class="docutils literal"><span class="pre">'masks'</span></code></td>
<td>complex variable type definitions (arrays, dichotomous, etc.)</td>
</tr>
</tbody>
</table>
<div class="admonition seealso">
<p class="first admonition-title">See also</p>
<p class="last">Usage examples of loading and working with case and metadata files are
provided throughout the <code class="xref doc docutils literal"><span class="pre">Stack</span></code>, <code class="xref doc docutils literal"><span class="pre">Aggregations</span></code> and <code class="xref doc docutils literal"><span class="pre">Views</span></code> sections of the
docs.</p>
</div>
</div>
<div class="section" id="supported-conversions">
<h2>Supported conversions<a class="headerlink" href="#supported-conversions" title="Permalink to this headline">¶</a></h2>
<p>In adddition to providing plain <code class="docutils literal"><span class="pre">.csv</span></code>/<code class="docutils literal"><span class="pre">.json</span></code> data (pairs), source files
can be read into Quantipy using a number of I/O functions to deal with
standard file formats encountered in the market research industry:</p>
<table border="1" class="docutils">
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Software</th>
<th class="head">Format</th>
<th class="head">Read</th>
<th class="head">Write</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>SPSS
Statistics</td>
<td>.sav</td>
<td>Yes</td>
<td>Yes</td>
</tr>
<tr class="row-odd"><td>SPSS
Dimensions</td>
<td>.dff/.mdd</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-even"><td>Decipher</td>
<td>tab-delimited
.json/ .txt</td>
<td>Yes</td>
<td>No</td>
</tr>
<tr class="row-odd"><td>Ascribe</td>
<td>tab-delimited
.xml/ .txt</td>
<td>Yes</td>
<td>No</td>
</tr>
</tbody>
</table>
<p>The following functions are designed to convert the different file formats&#8217;
structures into inputs understood by Quantipy.</p>
<div class="section" id="spss-statistics">
<h3>SPSS Statistics<a class="headerlink" href="#spss-statistics" title="Permalink to this headline">¶</a></h3>
<p><strong>Reading:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">quantipy.core.tools.dp.io</span> <span class="kn">import</span> <span class="n">read_spss</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read_spss</span><span class="p">(</span><span class="n">path_sav</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">On a Windows machine you MUST use <code class="docutils literal"><span class="pre">ioLocale=None</span></code> when reading
from SPSS. This means if you are using a Windows machine your base
example for reading from SPSS is
<code class="docutils literal"><span class="pre">meta,</span> <span class="pre">data</span> <span class="pre">=</span> <span class="pre">read_spss(path_sav,</span> <span class="pre">ioLocale=None)</span></code>.</p>
</div>
<p>When reading from SPSS you have the opportunity to specify a custom
dichotomous values map, that will be used to convert all dichotomous
sets into Quantipy delimited sets, using the <code class="docutils literal"><span class="pre">dichot</span></code> argument.</p>
<p>The entire read operation will use the same map on all dichotomous
sets so they must be applied uniformly throughout the SAV file. The
default map that will be used if none is provided will be
<code class="docutils literal"><span class="pre">{'yes':</span> <span class="pre">1,</span> <span class="pre">'no':</span> <span class="pre">0}</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read_spss</span><span class="p">(</span><span class="n">path_sav</span><span class="p">,</span> <span class="n">dichot</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;yes&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;no&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">})</span>
</pre></div>
</div>
<p>SPSS dates will be converted to pandas dates by default but
if this results in conversion issues or failures you can read
the dates in as Quantipy strings to deal with them later, using the
<code class="docutils literal"><span class="pre">dates_as_strings</span></code> argument.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read_spss</span><span class="p">(</span><span class="n">path_sav</span><span class="p">,</span> <span class="n">dates_as_strings</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Writing:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">quantipy.core.tools.dp.io</span> <span class="kn">import</span> <span class="n">write_spss</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">write_spss</span><span class="p">(</span><span class="n">path_sav</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">data</span><span class="p">)</span>
</pre></div>
</div>
<p>By default SPSS files will be generated from the <code class="docutils literal"><span class="pre">'data</span> <span class="pre">file'</span></code>
set found in <code class="docutils literal"><span class="pre">meta['sets']</span></code>, but a custom set can be named instead
using the <code class="docutils literal"><span class="pre">from_set</span></code> argument.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">write_spss</span><span class="p">(</span><span class="n">path_sav_analysis</span><span class="p">,</span> <span class="n">meta</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">from_set</span><span class="o">=</span><span class="s1">&#39;sav-export&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The custom set must be well-formed:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="s2">&quot;sets&quot;</span> <span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>    <span class="s2">&quot;sav-export&quot;</span><span class="p">:</span> <span class="p">{</span>
<span class="gp">... </span>        <span class="s2">&quot;items&quot;</span><span class="p">:</span> <span class="p">[</span>
<span class="gp">... </span>            <span class="s2">&quot;columns@Q1&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;columns@Q2&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="s2">&quot;columns@Q3&quot;</span><span class="p">,</span>
<span class="gp">... </span>            <span class="o">...</span>
<span class="gp">... </span>        <span class="p">]</span>
<span class="gp">... </span>    <span class="p">}</span>
<span class="gp">... </span><span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="dimensions">
<h3>Dimensions<a class="headerlink" href="#dimensions" title="Permalink to this headline">¶</a></h3>
<p><strong>Reading:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">quantipy.core.tools.dp.io</span> <span class="kn">import</span> <span class="n">read_dimensions</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read_dimensions</span><span class="p">(</span><span class="n">path_mdd</span><span class="p">,</span> <span class="n">path_ddf</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="decipher">
<h3>Decipher<a class="headerlink" href="#decipher" title="Permalink to this headline">¶</a></h3>
<p><strong>Reading:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">quantipy.core.tools.dp.io</span> <span class="kn">import</span> <span class="n">read_decipher</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read_decipher</span><span class="p">(</span><span class="n">path_json</span><span class="p">,</span> <span class="n">path_txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ascribe">
<h3>Ascribe<a class="headerlink" href="#ascribe" title="Permalink to this headline">¶</a></h3>
<p><strong>Reading:</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="kn">from</span> <span class="nn">quantipy.core.tools.dp.io</span> <span class="kn">import</span> <span class="n">read_ascribe</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">meta</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">read_ascribe</span><span class="p">(</span><span class="n">path_xml</span><span class="p">,</span> <span class="n">path_txt</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="weighting.html" class="btn btn-neutral" title="Case weight computation" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2015, Quantipy dev team.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../../',
            VERSION:'0.1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../../_static/doctools.js"></script>
      <script type="text/javascript" src="../../../_static/custom.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>