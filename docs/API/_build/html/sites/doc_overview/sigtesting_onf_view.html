<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Signficance testing &mdash; Quantipy 0.1.0 documentation</title>
    
    <link rel="stylesheet" href="../../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '0.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="Quantipy 0.1.0 documentation" href="../../index.html" />
    <link rel="up" title="Documentation" href="overview.html" />
    <link rel="next" title="Extraction and Exports" href="chain_cluster_build.html" />
    <link rel="prev" title="View method manipulation" href="views_freq_desc.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9">

  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="chain_cluster_build.html" title="Extraction and Exports"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="views_freq_desc.html" title="View method manipulation"
             accesskey="P">previous</a> |</li>
        <li><a href="../../index.html">Quantipy 0.1.0 documentation</a> &raquo;</li>
          <li><a href="overview.html" accesskey="U">Documentation</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="toctree-wrapper compound">
<ul class="simple">
</ul>
</div>
<div class="section" id="signficance-testing">
<h1>Signficance testing<a class="headerlink" href="#signficance-testing" title="Permalink to this headline">¶</a></h1>
<div class="line-block">
<div class="line"><a class="reference internal" href="../../genindex.html"><em>Index</em></a></div>
<div class="line"><a class="reference internal" href="../../py-modindex.html"><em>Module Index</em></a></div>
</div>
<hr class="docutils" />
<div class="section" id="the-test-class">
<h2>The <tt class="docutils literal"><span class="pre">Test</span></tt> class<a class="headerlink" href="#the-test-class" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">class:</th><td class="field-body"><tt class="docutils literal"><span class="pre">quantipy.Test(link,</span> <span class="pre">view_name_notation)</span></tt></td>
</tr>
</tbody>
</table>
<p>Quantipy offers tests of statistical significance for means and proportions,
including nets and other user-created code combinations, via its <tt class="docutils literal"><span class="pre">Test</span></tt>
class. Tests are based on comparisons between all unqiue column code pairs of
a <tt class="docutils literal"><span class="pre">Link</span></tt>. Similiar to the <tt class="docutils literal"><span class="pre">Quantity</span></tt> object, testing can be performed
ad-hoc on appropriate views kept in a Stack or in an automated fashion
using the <tt class="docutils literal"><span class="pre">View</span></tt> object&#8217;s features.</p>
<p>To create <tt class="docutils literal"><span class="pre">Test</span></tt> instance, a Link and the view notation string of a <strong>count</strong>
-based (i.e. <strong>not</strong> column a row percentages) or a <strong>mean</strong> View must be
provided. For example, let&#8217;s consider a small Stack that contains some
frequency, net code and mean aggregations:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">&#39;view&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="go">x                                   birth_year            q5_1              q8</span>
<span class="go">y                                       gender locality gender locality gender locality</span>
<span class="go">view</span>
<span class="go">x|frequency|x[(1,2)]:y|y||net1             NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|||net1              NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency||y||c%                           1        1      1        1      1        1</span>
<span class="go">x|frequency||||counts                        1        1      1        1      1        1</span>
<span class="go">x|mean|x:y|||mean                            1        1      1        1    NaN      NaN</span>
<span class="go">x|mean|x[1,2,3,4,5]:y|||excl. 97/98        NaN      NaN      1        1    NaN      NaN</span>
</pre></div>
</div>
<p>First we will test the proportions and the simple preset mean on the following
Link:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="n">my_data_key</span><span class="p">][</span><span class="s">&#39;no_filter&#39;</span><span class="p">][</span><span class="s">&#39;q5_1&#39;</span><span class="p">][</span><span class="s">&#39;gender&#39;</span><span class="p">]</span>
</pre></div>
</div>
<p>To create a <tt class="docutils literal"><span class="pre">Test</span></tt> object for our proportions test, passing the view
notation results in:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">Test</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="s">&#39;x|frequency||||counts&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span>
<span class="go">&lt;class &#39;quantipy.core.quantify.engine.Test&#39;&gt;, test metric: proportions,</span>
<span class="go">parameters: None, mimicked: None, level: None</span>
</pre></div>
</div>
<p>While doing the same for the simple mean shows the following:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">means_test</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">Test</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="s">&#39;x|mean|x:y|||mean&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means_test</span>
<span class="go">&lt;class quantipy.core.quantify.engine.Test&#39;&gt;, test metric: means,</span>
<span class="go">parameters: None, mimicked: None, level: None</span>
</pre></div>
</div>
<p>This tells us that the <tt class="docutils literal"><span class="pre">Test</span></tt> object instances correctly infered the metric
to be tested. However, the tests do not have any options set yet, their
<tt class="docutils literal"><span class="pre">parameters</span></tt>, <tt class="docutils literal"><span class="pre">mimicked</span></tt> and <tt class="docutils literal"><span class="pre">level</span></tt> information are all <tt class="docutils literal"><span class="pre">None</span></tt>. To set
Quantipy&#8217;s default test options, calling the <tt class="docutils literal"><span class="pre">set_params()</span></tt> method will
assign the parameter values, most noteworthy the level of signficance.</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span><span class="o">.</span><span class="n">set_params</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span><span class="o">.</span><span class="n">level</span>
<span class="go">0.05</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">means_test</span><span class="o">.</span><span class="n">set_params</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">means_test</span><span class="o">.</span><span class="n">level</span>
<span class="go">0.05</span>
</pre></div>
</div>
<p>To start the test algorithm and show its results, we simply use <tt class="docutils literal"><span class="pre">run()</span></tt>:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Question        gender</span>
<span class="go">Values               1    2</span>
<span class="go">Question Values</span>
<span class="go">q5_1     1         NaN  NaN</span>
<span class="go">         2         NaN  NaN</span>
<span class="go">         3         [2]  NaN</span>
<span class="go">         4         NaN  NaN</span>
<span class="go">         5         NaN  [1]</span>
<span class="go">         97        [2]  NaN</span>
<span class="go">         98        NaN  [1]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">means_test</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Question        gender</span>
<span class="go">Values               1    2</span>
<span class="go">Question Values</span>
<span class="go">q5_1     mean      NaN  [1]</span>
</pre></div>
</div>
<p>Test results are presented by showing a list of column codes to that the resp.
relevant column mean or count results are significant larger to. Therefore,
in the above means test example the mean for the column group <tt class="docutils literal"><span class="pre">'2'</span></tt> is
larger than the one in the group of column code <tt class="docutils literal"><span class="pre">'1'</span></tt>. To demonstrate this
on a case with more column codes, let&#8217;s look at a proportions test for the
following Link:</p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="n">my_data_key</span><span class="p">][</span><span class="s">&#39;no_filter&#39;</span><span class="p">][</span><span class="s">&#39;q8&#39;</span><span class="p">][</span><span class="s">&#39;locality&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">Test</span><span class="p">(</span><span class="n">link</span><span class="p">,</span> <span class="s">&#39;x|frequency||||counts&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">props_test</span><span class="o">.</span><span class="n">set_params</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
<span class="go">Question          locality</span>
<span class="go">Values                   1          2    3   4   5</span>
<span class="go">Question Values</span>
<span class="go">q8       1       [3, 4, 5]  [3, 4, 5]  NaN NaN NaN</span>
<span class="go">         2             NaN        NaN  NaN NaN NaN</span>
<span class="go">         3             NaN        NaN  NaN NaN NaN</span>
<span class="go">         4             NaN        NaN  NaN NaN NaN</span>
<span class="go">         5             NaN        NaN  NaN NaN NaN</span>
<span class="go">         96            NaN        NaN  NaN NaN NaN</span>
<span class="go">         98            NaN        [5]  [5] NaN NaN</span>
</pre></div>
</div>
</div>
<div class="section" id="test-options-mimicking">
<h2>Test options &amp; mimicking<a class="headerlink" href="#test-options-mimicking" title="Permalink to this headline">¶</a></h2>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">method:</th><td class="field-body"><tt class="docutils literal"><span class="pre">quantipy.Test.set_params(level='mid',</span> <span class="pre">mimic='Dim',</span> <span class="pre">testtype='pooled',</span>
<span class="pre">use_ebase=True,</span> <span class="pre">ovlp_correc=True,</span>
<span class="pre">cwi_filter=False)</span></tt></td>
</tr>
</tbody>
</table>
<p>The <tt class="docutils literal"><span class="pre">set_params()</span></tt> method does a lot more than just setting the level of
signficiance. As a default it will perform a pooled variances test that uses
effective sample sizes and an overlap control formula to balance the
effects of possible data weighting and multi-coded column groups, i.e. when a
Link&#8217;s y-axis consists of a multiple response question. This test setup mimics
the test algorithm of <em>SPSS Data Collection Professional</em>/<em>Dimensions</em>
(illustrated by the value of the <tt class="docutils literal"><span class="pre">mimic</span></tt> parameter being <tt class="docutils literal"><span class="pre">'Dim'</span></tt> ).</p>
<p>To mimic one of the algorithms used by the <em>Askia</em> survey software (a z-score
based, unpooled variances approach), <tt class="docutils literal"><span class="pre">mimic</span></tt> can be set to <tt class="docutils literal"><span class="pre">'askia'</span></tt>. In
comparison, the two <tt class="docutils literal"><span class="pre">mimic</span></tt> options correspond to the following test
settings:</p>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="41%" />
<col width="41%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head"><tt class="docutils literal"><span class="pre">mimic='Dim'</span></tt></th>
<th class="head"><tt class="docutils literal"><span class="pre">mimic='askia'</span></tt></th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">testtype</span></tt></td>
<td><tt class="docutils literal"><span class="pre">pooled</span></tt>:
pooled variances,
assumes equal variances</td>
<td><tt class="docutils literal"><span class="pre">unpooled</span></tt>:
unpooled variances,
assumes unequal variances</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">use_ebase</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt>:
effective sample sizes instead of
weighted ones for weighted data</td>
<td><tt class="docutils literal"><span class="pre">False</span></tt>:
weighted sample sizes used for
weighted data</td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">ovlp_correc</span></tt></td>
<td><tt class="docutils literal"><span class="pre">True</span></tt>:
case data overlap between column
codes is controlled for and adjusted</td>
<td><tt class="docutils literal"><span class="pre">False</span></tt>:
overlap is ignored and might bias
mean tests when y-axis is multi-code</td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">cwi_filter</span></tt></td>
<td><tt class="docutils literal"><span class="pre">False</span></tt>:
TODO</td>
<td><tt class="docutils literal"><span class="pre">True</span></tt>:
TODO</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">Currently, direct changes to the parameter settings are ignored by Quantipy.
It is therefore not possible to combine e.g. a test that uses unpooled
variances in combination with overlap correction.  In a future version of
Quantipy this limitation will be overcome and the test settings will become
fully exposed to the user.</p>
</div>
<p><strong>Level of significance</strong>: Due to the different (mimicked) test approaches,
levels of signficance generally are choosen by specifying <tt class="docutils literal"><span class="pre">level</span></tt> to either
be <tt class="docutils literal"><span class="pre">'low'</span></tt> (=0.1), <tt class="docutils literal"><span class="pre">'mid'</span></tt> (=0.05) or <tt class="docutils literal"><span class="pre">'high'</span></tt> (=0.01), which covers the
regularly used test levels in MR environments. When mimicking the <em>Dimensions</em>
package it is also possible to pass the level of significance as a <tt class="docutils literal"><span class="pre">float</span></tt>
value between 0 and 1. If this is done mimickig <tt class="docutils literal"><span class="pre">'askia'</span></tt>, the level will
fall back to <tt class="docutils literal"><span class="pre">'low'</span></tt>.</p>
</div>
<div class="section" id="coltests-view-method">
<h2><tt class="docutils literal"><span class="pre">coltests</span></tt> view method<a class="headerlink" href="#coltests-view-method" title="Permalink to this headline">¶</a></h2>
<p>Just as the <tt class="docutils literal"><span class="pre">frequency</span></tt> and <tt class="docutils literal"><span class="pre">descriptives</span></tt> view methods wrap the
<tt class="docutils literal"><span class="pre">Quantity</span></tt> aggregation features, <tt class="docutils literal"><span class="pre">coltests</span></tt> is doing the same with
Quantipy&#8217;s significance testing functionality. Applying batch-style
significance testing to a Stack therefore is made easy by using
<tt class="docutils literal"><span class="pre">ViewMapper</span></tt>&#8216;s <tt class="docutils literal"><span class="pre">make_template()</span></tt> and <tt class="docutils literal"><span class="pre">add_method()</span></tt> methods. The
<tt class="docutils literal"><span class="pre">coltests</span></tt> <strong>specific</strong> <tt class="docutils literal"><span class="pre">kwargs</span></tt> are as follows:</p>
<table border="1" class="docutils">
<colgroup>
<col width="21%" />
<col width="35%" />
<col width="17%" />
<col width="27%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head"><tt class="docutils literal"><span class="pre">kwarg</span></tt></th>
<th class="head">controls</th>
<th class="head">defaults to</th>
<th class="head">accepts</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'metric'</span></tt></td>
<td>props or means test
calculation</td>
<td><tt class="docutils literal"><span class="pre">'props'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'props'</span></tt> or
<tt class="docutils literal"><span class="pre">'means'</span></tt></td>
</tr>
<tr class="row-odd"><td><tt class="docutils literal"><span class="pre">'mimic'</span></tt></td>
<td>test setup to be used
via mimicking</td>
<td><tt class="docutils literal"><span class="pre">'Dim'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'Dim'</span></tt> or
<tt class="docutils literal"><span class="pre">'askia'</span></tt></td>
</tr>
<tr class="row-even"><td><tt class="docutils literal"><span class="pre">'level'</span></tt></td>
<td>level of significance</td>
<td><tt class="docutils literal"><span class="pre">'mid'</span></tt></td>
<td><tt class="docutils literal"><span class="pre">'low'</span></tt>, <tt class="docutils literal"><span class="pre">'mid'</span></tt>
or <tt class="docutils literal"><span class="pre">'high'</span></tt>;
<tt class="docutils literal"><span class="pre">float</span></tt> value</td>
</tr>
</tbody>
</table>
<p>Using the example Stack from above, here are some usage examples:</p>
<p><strong>1. Running the default</strong></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">default_sigtest</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">ViewMapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">default_sigtest</span><span class="o">.</span><span class="n">make_template</span><span class="p">(</span><span class="s">&#39;coltests&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">default_sigtest</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;props_Dim_0.05&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">views</span><span class="o">=</span><span class="n">default_sigtest</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">&#39;view&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="go">x                                                birth_year            q5_1              q8</span>
<span class="go">y                                                    gender locality gender locality gender locality</span>
<span class="go">view</span>
<span class="go">x|frequency|x:y|||cbase                                   1        1      1        1      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|y||net1                          NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|||net1                           NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency||y||c%                                        1        1      1        1      1        1</span>
<span class="go">x|frequency||||counts                                     1        1      1        1      1        1</span>
<span class="go">x|mean|x:y|||mean                                         1        1      1        1    NaN      NaN</span>
<span class="go">x|mean|x[1,2,3,4,5]:y|||excl. 97/98                     NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.props.Dim.10|x[(1,2)]:y|||props_Dim_0.05        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.10||||props_Dim_0.05                    1        1      1        1      1        1</span>
</pre></div>
</div>
<p><strong>2. Testing with different levels of significance</strong></p>
<p><em>Iterator template for levels</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">multiple_tests</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">ViewMapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterator_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;high&#39;</span><span class="p">,</span> <span class="s">&#39;mid&#39;</span><span class="p">,</span> <span class="s">&#39;low&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">multiple_tests</span><span class="o">.</span><span class="n">make_template</span><span class="p">(</span><span class="s">&#39;coltests&#39;</span><span class="p">,</span> <span class="n">iterators</span><span class="o">=</span><span class="n">iterator_spec</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Specifying the view method and running the tests on the whole Stack</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">multiple_tests</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;props_tests_Dim&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">views</span><span class="o">=</span><span class="n">multiple_tests</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Results</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">&#39;view&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="go">x                                                 birth_year            q5_1              q8</span>
<span class="go">y                                                     gender locality gender locality gender locality</span>
<span class="go">view</span>
<span class="go">x|frequency|x[(1,2)]:y|y||net1                           NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|||net1                            NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency||y||c%                                         1        1      1        1      1        1</span>
<span class="go">x|frequency||||counts                                      1        1      1        1      1        1</span>
<span class="go">x|mean|x:y|||mean                                          1        1      1        1    NaN      NaN</span>
<span class="go">x|mean|x[1,2,3,4,5]:y|||excl. 98/98                      NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.props.Dim.01|x[(1,2)]:y|||props_tests_Dim        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.01||||props_tests_Dim                    1        1      1        1      1        1</span>
<span class="go">x|tests.props.Dim.05|x[(1,2)]:y|||props_tests_Dim        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.05||||props_tests_Dim                    1        1      1        1      1        1</span>
<span class="go">x|tests.props.Dim.10|x[(1,2)]:y|||props_tests_Dim        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.10||||props_tests_Dim                    1        1      1        1      1        1</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="n">my_data_key</span><span class="p">][</span><span class="s">&#39;no_filter&#39;</span><span class="p">][</span><span class="s">&#39;q8&#39;</span><span class="p">][</span><span class="s">&#39;gender&#39;</span><span class="p">]</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span><span class="p">[</span><span class="s">&#39;x|tests.props.Dim.01|x[(1,2)]:y|||props_tests_Dim&#39;</span><span class="p">]</span>
<span class="go">Question        locality</span>
<span class="go">Values                 1    2   3   4   5</span>
<span class="go">Question Values</span>
<span class="go">q8       net1        [3]  [3] NaN NaN NaN</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span><span class="p">[</span><span class="s">&#39;x|tests.props.Dim.05|x[(1,2)]:y|||props_tests_Dim&#39;</span><span class="p">]</span>
<span class="go">Question          locality</span>
<span class="go">Values                   1          2   3   4   5</span>
<span class="go">Question Values</span>
<span class="go">q8       net1    [3, 4, 5]  [3, 4, 5] NaN NaN NaN</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span><span class="p">[</span><span class="s">&#39;x|tests.props.Dim.10|x[(1,2)]:y|||props_tests_Dim&#39;</span><span class="p">]</span>
<span class="go">Question          locality</span>
<span class="go">Values                   1          2   3   4   5</span>
<span class="go">Question Values</span>
<span class="go">q8       net1    [3, 4, 5]  [3, 4, 5] NaN NaN NaN</span>
</pre></div>
</div>
<p><strong>3. Different levels of significance, tests for means</strong></p>
<p><em>Iterator template for levels and metrics</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">all_tested</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">ViewMapper</span><span class="p">()</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">iterator_spec</span> <span class="o">=</span> <span class="p">{</span>
<span class="gp">... </span>                 <span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;high&#39;</span><span class="p">,</span> <span class="s">&#39;mid&#39;</span><span class="p">,</span> <span class="s">&#39;low&#39;</span><span class="p">],</span>
<span class="gp">... </span>                 <span class="s">&#39;metric&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;props&#39;</span><span class="p">,</span> <span class="s">&#39;means&#39;</span><span class="p">]</span>
<span class="gp">... </span>                 <span class="p">}</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">all_tested</span><span class="o">.</span><span class="n">make_template</span><span class="p">(</span><span class="s">&#39;coltests&#39;</span><span class="p">,</span> <span class="n">iterators</span><span class="o">=</span><span class="n">iterator_spec</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Creating and adding the view methods</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">all_tested</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;column_tests_Dim&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">views</span><span class="o">=</span><span class="n">all_tested</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Results</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">&#39;view&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="go">x                                           birth_year            q5_1              q8</span>
<span class="go">y                                               gender locality gender locality gender locality</span>
<span class="go">view</span>
<span class="go">x|frequency|x[(1,2)]:y|y||net1                     NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|||net1                      NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency||y||c%                                   1        1      1        1      1        1</span>
<span class="go">x|frequency||||counts                                1        1      1        1      1        1</span>
<span class="go">x|mean|x:y|||mean                                    1        1      1        1    NaN      NaN</span>
<span class="go">x|mean|x[1,2,3,4,5]:y|||excl. 98/98                NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.means.Dim.01|x:y|||tests                     1        1      1        1    NaN      NaN</span>
<span class="go">x|tests.means.Dim.01|x[1,2,3,4,5]:y|||tests        NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.means.Dim.05|x:y|||tests                     1        1      1        1    NaN      NaN</span>
<span class="go">x|tests.means.Dim.05|x[1,2,3,4,5]:y|||tests        NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.means.Dim.10|x:y|||tests                     1        1      1        1    NaN      NaN</span>
<span class="go">x|tests.means.Dim.10|x[1,2,3,4,5]:y|||tests        NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.props.Dim.01|x[(1,2)]:y|||tests            NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.01||||tests                        1        1      1        1      1        1</span>
<span class="go">x|tests.props.Dim.05|x[(1,2)]:y|||tests            NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.05||||tests                        1        1      1        1      1        1</span>
<span class="go">x|tests.props.Dim.10|x[(1,2)]:y|||tests            NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.10||||tests                        1        1      1        1      1        1</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="n">my_data_key</span><span class="p">][</span><span class="s">&#39;no_filter&#39;</span><span class="p">][</span><span class="s">&#39;birthyear&#39;</span><span class="p">][</span><span class="s">&#39;gender&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">link</span><span class="p">[</span><span class="s">&#39;x|tests.means.Dim.10|x:y|||tests&#39;</span><span class="p">]</span>
<span class="go">Question          gender</span>
<span class="go">Values                 1   2</span>
<span class="go">Question   Values</span>
<span class="go">birth_year mean      NaN NaN</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">link</span> <span class="o">=</span> <span class="n">stack</span><span class="p">[</span><span class="n">my_data_key</span><span class="p">][</span><span class="s">&#39;no_filter&#39;</span><span class="p">][</span><span class="s">&#39;q5_1&#39;</span><span class="p">][</span><span class="s">&#39;gender&#39;</span><span class="p">]</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">link</span><span class="p">[</span><span class="s">&#39;x|tests.means.Dim.10|x[1,2,3,4,5]:y|||tests&#39;</span><span class="p">]</span>
<span class="go">Question        gender</span>
<span class="go">Values               1    2</span>
<span class="go">Question Values</span>
<span class="go">q5_1     mean      NaN  [1]</span>
</pre></div>
</div>
<p><strong>4. Testing only a portion of a Stack</strong></p>
<p><em>Setting up iterators and template</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q8_only</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">ViewMapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">iterator_spec</span> <span class="o">=</span> <span class="p">{</span><span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s">&#39;high&#39;</span><span class="p">,</span> <span class="s">&#39;mid&#39;</span><span class="p">,</span> <span class="s">&#39;low&#39;</span><span class="p">]}</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q8_only</span><span class="o">.</span><span class="n">make_template</span><span class="p">(</span><span class="s">&#39;coltests&#39;</span><span class="p">,</span> <span class="n">iterators</span><span class="o">=</span><span class="n">iterator_spec</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Creating and adding the methods to a selection of Links</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">q8_only</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;tests_on_q8&#39;</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;q8&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="n">q8_only</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Results</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">&#39;view&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="go">x                                             birth_year            q5_1              q8</span>
<span class="go">y                                                 gender locality gender locality gender locality</span>
<span class="go">view</span>
<span class="go">x|frequency|x[(1,2)]:y|y||net1                       NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|||net1                        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency||y||c%                                     1        1      1        1      1        1</span>
<span class="go">x|frequency||||counts                                  1        1      1        1      1        1</span>
<span class="go">x|mean|x:y|||mean                                      1        1      1        1    NaN      NaN</span>
<span class="go">x|mean|x[1,2,3,4,5]:y|||excl. 98/98                  NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.props.Dim.01|x[(1,2)]:y|||tests_on_q8        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.01||||tests_on_q8                  NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.05|x[(1,2)]:y|||tests_on_q8        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.05||||tests_on_q8                  NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.10|x[(1,2)]:y|||tests_on_q8        NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.10||||tests_on_q8                  NaN      NaN    NaN      NaN      1        1</span>
</pre></div>
</div>
<p><strong>4. Using different test levels for different portions of the Stack</strong></p>
<p><em>Setting up the template</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">specific_levels</span> <span class="o">=</span> <span class="n">qp</span><span class="o">.</span><span class="n">ViewMapper</span><span class="p">()</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">specific_levels</span><span class="o">.</span><span class="n">make_template</span><span class="p">(</span><span class="s">&#39;coltests&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p><em>Adding methods wih different levels and using</em> <tt class="docutils literal"><span class="pre">subset()</span></tt></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">specific_levels</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;0.1&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="s">&#39;high&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">specific_levels</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;0.5&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="s">&#39;mid&#39;</span><span class="p">})</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">specific_levels</span><span class="o">.</span><span class="n">add_method</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s">&#39;very low level&#39;</span><span class="p">,</span> <span class="n">kwargs</span><span class="o">=</span><span class="p">{</span><span class="s">&#39;level&#39;</span><span class="p">:</span> <span class="mf">0.2</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;q8&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="n">specific_levels</span><span class="o">.</span><span class="n">subset</span><span class="p">([</span><span class="s">&#39;0.1&#39;</span><span class="p">,</span> <span class="s">&#39;0.5&#39;</span><span class="p">]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;birth_year&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="n">specific_levels</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&#39;very low level&#39;</span><span class="p">))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">add_link</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="s">&#39;q5_1&#39;</span><span class="p">,</span> <span class="n">views</span><span class="o">=</span><span class="n">specific_levels</span><span class="o">.</span><span class="n">subset</span><span class="p">(</span><span class="s">&#39;0.5&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p><em>Results</em></p>
<div class="highlight-python"><div class="highlight"><pre><span class="gp">&gt;&gt;&gt; </span><span class="n">stack</span><span class="o">.</span><span class="n">describe</span><span class="p">(</span><span class="n">index</span><span class="o">=</span><span class="s">&#39;view&#39;</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s">&#39;x&#39;</span><span class="p">,</span> <span class="s">&#39;y&#39;</span><span class="p">])</span>
<span class="go">x                                      birth_year            q5_1              q8</span>
<span class="go">y                                          gender locality gender locality gender locality</span>
<span class="go">view</span>
<span class="go">x|frequency|x[(1,2)]:y|y||net1                NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency|x[(1,2)]:y|||net1                 NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|frequency||y||c%                              1        1      1        1      1        1</span>
<span class="go">x|frequency||||counts                           1        1      1        1      1        1</span>
<span class="go">x|mean|x:y|||mean                               1        1      1        1    NaN      NaN</span>
<span class="go">x|mean|x[1,2,3,4,5]:y|||excl. 98/98           NaN      NaN      1        1    NaN      NaN</span>
<span class="go">x|tests.props.Dim.01|x[(1,2)]:y|||0.1         NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.01||||0.1                   NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.05|x[(1,2)]:y|||0.5         NaN      NaN    NaN      NaN      1        1</span>
<span class="go">x|tests.props.Dim.05||||0.5                   NaN      NaN      1        1      1        1</span>
<span class="go">x|tests.props.Dim.20||||very low level          1        1    NaN      NaN    NaN      NaN</span>
</pre></div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo.jpg" alt="Logo"/>
    
    <h1 class="logo logo-name">Quantipy</h2>
    
  </a>
</p>







<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script><h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../whatsnew.html">What&#8217;s new?</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="overview.html">Documentation</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="io.html">Data sources</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_preparation.html">Data preparation / recoding</a></li>
<li class="toctree-l2"><a class="reference internal" href="weighting.html">Case weight computation</a></li>
<li class="toctree-l2"><a class="reference internal" href="link_and_stack.html">Links and Stack</a></li>
<li class="toctree-l2"><a class="reference internal" href="aggregations.html"><tt class="docutils literal"><span class="pre">quantify</span></tt> aggregation engine</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_concept_notation.html">View concept introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="views_freq_desc.html">View method manipulation</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Signficance testing</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#the-test-class">The <tt class="docutils literal"><span class="pre">Test</span></tt> class</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-options-mimicking">Test options &amp; mimicking</a></li>
<li class="toctree-l3"><a class="reference internal" href="#coltests-view-method"><tt class="docutils literal"><span class="pre">coltests</span></tt> view method</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="chain_cluster_build.html">Extraction and Exports</a></li>
</ul>
</li>
</ul>


        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2015, Quantipy dev team.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.2.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.3</a>
      
      |
      <a href="../../_sources/sites/doc_overview/sigtesting_onf_view.txt"
          rel="nofollow">Page source</a></li>
    </div>

    

    
  </body>
</html>